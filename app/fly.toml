app = "turnertelegram"
primary_region = "ams"

[build]
  dockerfile = "Dockerfile"

[env]
  DB_PATH = "/data/prices.db"
  FETCH_EVERY_MINUTES = "15"

  POST_TO_TELEGRAM = "true"

  # Candles
  CANDLE_INTERVAL_PRIMARY = "15min"
  CANDLE_INTERVALS_CONTEXT = "1h,4h"
  HISTORY_CANDLES = "320"

  # News
  NEWS_ALERTS = "true"
  NEWS_THRESHOLD = "2.5"
  NEWS_SEND_NEUTRAL = "false"
  NEWS_MAX_PER_CYCLE = "10"

  # Order book / flow proxies
  FLOW_ALERTS = "true"
  FLOW_NOTIONAL_THRESHOLD_USD = "250000"

  ORDERBOOK_ALERTS = "true"
  OB_IMBALANCE_THRESHOLD = "0.22"
  OB_SPREAD_BPS_THRESHOLD = "8"
  OB_WALL_USD_THRESHOLD = "350000"

  # Branding (set these to match turrner.com exactly)
  BRAND_BG = "#0b0f14"
  BRAND_GRID = "#243042"
  BRAND_TEXT = "#cfd6e6"
  BRAND_UP = "#2de37a"
  BRAND_DOWN = "#ff4d4d"
  BRAND_ACCENT = "#8ea0ff"

[http_service]
  internal_port = 8080
  force_https = true
  auto_start_machines = true
  auto_stop_machines = false
  min_machines_running = 1

  # Prevent heavy work during boot
  RUN_ON_STARTUP = "false"

  # Memory-safe chart settings (raise only if you increase RAM)
  CHART_BARS = "220"
  CHART_DPI = "240"
